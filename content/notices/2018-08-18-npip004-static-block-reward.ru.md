---
layout: notices
title: 'NPIP004: Вознаграждение за статический блок'
author: Craig MacGregor
date: '2018-08-18T12:13:05+12:00'
feature_image: /images/uploads/npip004.png
notice_categories:
  - NPIP
---
После того, как пару месяцев назад был осуществлен софтфорк для фиксации синхронизации часов в сети, теперь NavCoin совместим с протоколом Proof of Stake v2, опубликованным Blackcoin.
<!--подробнее-->

https://blackcoin.org/blackcoin-pos-protocol-v2-whitepaper.pdf

Следующий логический шаг - совместимость с PoS v3 (3-тья версия). Спецификацию можно прочитать здесь:

https://bravenewcoin.com/assets/Whitepapers/Blackcoin-POS-3.pdf

Если коротко, то PoS v3 включает в себя возможность холодного стекинга и фиксированное вознаграждение за блок.

Мы уже презентовали холодный стекинг в NPIP002, и он получил единогласную поддержку сообщества. Он планируется развертываться сразу после того, как вступит в силу механизм требований Фонда Сообщества и как только NavCoin будет на полпути к совместимости с PoS v3.

Это подводит нас ко второй части спецификации PoS v3 - фиксированному вознаграждению за блок.

Почему мы хотели сделать фиксированное вознаграждение за блок вместо вознаграждения на основе процентов? Несмотря на то, что получение вознаграждений за стекинг хорошо для вашего баланса NAV, однако основная цель стекинга - вознаграждение за проверку и защиту сети. При текущем вознаграждении на основе процентов, монеты могут находиться в автономном режиме в течение неопределенного периода времени, не защищая сеть, а затем появляясь в сети, чтобы получить свое вознаграждение, даже если они проделали совсем небольшую работу по обеспечению безопасности сети, за исключением нескольких блоков.

Монеты, которые находятся в сети, используют свой вес для проверки блоков, отчеканенных другими стекерами, и они играют важную роль в защите сети, даже если они не единственные, кто чеканит текущий блок. Именно они защищают сеть от 51%-ных атак, и поэтому для безопасности сети важно иметь, как можно больший вес монет в сети.

Для ознакомления с полным обоснованием, пожалуйста, обратитесь к NPIP004 здесь: https://github.com/NAVCoin/npips/blob/npip-0004/npip-0004.mediawiki

Помните, что на данном этапе это черновик, и он открыт для обсуждения. В конечном счете, никто не может изменить механизм консенсуса без поддержки со стороны сети, поэтому лучший выбор будет делаться сообществом и сетью. Далее, я хочу высказать несколько дополнительных соображений, и хотел бы получить на них отзывы.

### Обзор

NPIP004 предлагает установить статическое вознаграждение за блок в 2 NAV за блок.

В год добывается примерно 1 051 200 (2 \ * 60 \ * 24 * 365) блоков, что означает, что в качестве вознаграждений proof of stake в год будет генерироваться 2 102 400 NAV.

В настоящее время в обращении находится примерно 63 млн. NAV, поэтому уровень инфляции за счет вознаграждения за стекинг остановится на уровне 3,3% в год. Другая вещь, которую следует учитывать при статическом вознаграждении, заключается в том, что со времененм в процентном отношении оно будет экспоненциально уменьшаться.

Например, если в обращении находится 100 млн. NAV, то инфляция, генерируемая вознаграждением за стекинг, будет такой же (по сумме NAV) и будет равна 2,1% от общего предложения вместо 3,3%.

### Дефляционное предложение

Существуют некоторые споры касаемо того, является ли экспоненциальное дефляционное предложение хорошей или плохой вещью. Что касается экономики спроса-предложения, то она оказалась огромным благом для Биткойна, значение которого экспоненциально увеличивается по мере того, как каждое вознаграждение за майнинг уменьшается вдвое. Контраргумент заключается в том, что это плохо для распределения, так как в этом случае больше вознаграждаются ранние пользователей, а не новых участники экосистемы.

Лично я за дефляционную модель. Я думаю, что разница в вознаграждениях за майнинг сейчас и пока у нас не будет 100 миллионов в обращении (через 10 с лишним лет), ничтожна по сравнению с принятием, когда мы говорим о вещах, которые влияют на экономику спроса-предложения. За 10 лет она будет уменьшаться на 1/3 часть, а не каждые 4 года, как в случае с биткойном.

### Неравенство

Также проходило обсуждение относительно того, как бы это сподвигло к дальнейшему разделению между стекерами с большим и меньшим количеством NAV. Следует помнить, что, хотя вознаграждение является фиксированным, количество блоков, которое вы добываете, все равно пропорционально зависит от вашего веса в сети. Это означает, что стекеры все еще увеличивают богатство в процентах относительно друг друга. Давайте запустим несколько сценариев.

Простое уравнение:

`Всего вознаграждений / Вес сети * Баланс`

Предположим, что 20 миллионов NAV находятся в процессе стекинга (как на данный момент). Так будут выглядеть вознаграждения за стекинг для некоторых разных балансов в течение 1-го года.

`2 102 400 / 20 000 000 * Баланс`

| Баланс        | После 1 года     | Процент, % |
| ------------- | ---------------- | ---------- |
| 1 000 000 NAV	| 1 105 120.00 NAV | 10.512%    |
| 100 000 NAV   | 110 512.00 NAV   | 10.512%    |
| 10 000 NAV    | 11 051.20 NAV    | 10.512%    |
| 1 000 NAV     | 110.512 NAV      | 10.512%    |

Как вы можете заметить, единственная вещь, которая происходит - это смещение запятой назад. Однако в процентах все получают пропорционально тому, какой у них вклад.

Это слегка упрощенный, но достаточно точный пример. Независимо от того, сколько у вас есть NAV - 10% или 0,001% от общего веса стекинга, вы будете чеканить блоки пропорционально вашему весу, поэтому баланс каждого пользователя увеличивается с одинаковой процентной ставкой.

Единственное, что может усложнить дело - это усугубляемый интерес. Несколько человек были обеспокоены тем, что, поскольку некоторые лица с большим балансом за стекинг получают вознаграждения чаще, они будут эффективно убегать от более мелких игроков, которые никогда не получат возможность осуществить стекинг.

Я написал небольшую компьютерную программу для имитации вознаграждения за стекинг в течение 1-го года с учетом веса сети и дополнительных 2 NAV, добавляемых каждый раз, когда кто-то находит блок. Предположение, которое я сделал, является наихудшим вариантом сценария. Например, все монеты, находящиеся в стекинге, никогда не расходуются, а возвращаются обратно к весу стекинга.

Вы можете посмотреть программу здесь: https://github.com/craigmacgregor/static-reward-modeller/blob/master/model.js

Проще говоря, она рассчитывает, когда вы должны получить вознаграждение, исходя из вашего веса по сравнению с остальной частью сети, где сеть начинается с 20 мил. NAV и получает 2 NAV, добавляемых каждые 30 секунд. Исход таков:

| Стекер   | Стартовый баланс | Баланс в конце | Прибыль в процентнах |
| -------- | ---------------- | -------------- | -------------------- |
| баланс 1 | 1 000 000        | 1 105 120      | 10.51%               |
| баланс 2 | 100 000          | 110 512        | 10.51%               |
| баланс 3 | 10 000           | 11 052         | 10.52%               |
| баланс 4 | 1 000            | 1 106          | 10.6%                |
| вес      | 20 000 000       | 22 102 400     | 10.51%               |
| предлож. | 63 000 000       | 65 102 400     | 3.33%                |

Как вы можете видеть, более мелкие стекеры все еще получают свои награды, хотя баланс более крупных игроков увеличивается на 2 NAV каждые 20 блоков. Я даже смоделировал это для тех, у кого в наличии есть 100 NAV - и они получат 112 NAV через 1 год (увеличение на 12%). Так что получается эта модель отдает предпочтение более мелким стекерам, что на самом деле стало неожиданным результатом.

Единственное, что не учитывается - это решение орфанов. Я не могу смоделировать орфаны с помощью простой программы javascript. Я исследую этот момент при запуске NPIP в тестовой сети, чтобы убедиться, что в реальном мире проблем нет. Однако, я предполагаю, что будут лишь незначительные последствия.

Почему прибыль составляет более 10%?

Вы должны это помнить, так как общая сгенерированная сумма является фиксированной, но делится пропорционально. При весе сети в 20 млн., годовое вознаграждение за монету составит 10,5%, но если бы в процессе стекинга находилось 40 млн. монет, то ежегодное вознаграждение за монету составляло бы 5,25%. Чем больше людей запускают стекинг монет онлайн, тем меньше вознаграждение. В настоящее время, в стекинге находятся только около 25% NAV онлайн, но как правило, в стекинге мы видим около 40% NAV онлайн, что означает, что годовой доход составляет около 8,4% за монету. Если бы для размещения стекинга использовались 100% монет, годовой % вознаграждения за монету составил бы 3,33%.

### Как это отличается от других монет?

| Монета | Вознаграждение |
| ----   | ------         |
| PIVX   | 5-10%          |
| ARK    | 10-12%         |
| LSK    | 10%            |
| NEBL   | 10%            |
| NAV    | 5-10%          |

Источник: https://www.investinblockchain.com/best-proof-of-stake-coins

Таким образом, это действие поставило бы нас в один ряд с другими монетами PoS и при этом мы по-прежнему оставались бы в нижней части шкалы вознаграждений, особенно если больше людей запустят стекинг.

Я нашел данную таблицу, в которой можно найти довольно подробную информацию о большом количестве монет и их уровне инфляции:

https://docs.google.com/spreadsheets/d/1-weHt0PiIZWyXs1Uzp7QIUKk9TX7aa15RtFc8JJpn7g/edit#gid=237137882

Как вы можете увидеть, NavCoin по-прежнему будет иметь один из самых низких уровней инфляции на всем крипторынке даже добавив монеты PoW. Например, у биткойна, в настоящее время, уровень инфляции равен 3,68%.

### Разве такая низкая инфляция, как у нас, не лучший вариант?

При 4% в год и при 25% монет, находящихся в стекинге, инфляция NavCoin составляет только около 1,4% в год (включая фонд сообщества). Мы наблюдали, что вес сети стекинга за последние 6 месяцев сократился примерно вдвое, что можно объяснить сокращением вознаграждений, когда был создан фонд сообщества. Возможно, люди переходят на другие, более выгодные монеты PoS, потому что годовое вознаграждение в виде 4% слишком низкое. При таком весе сети и рыночном курсе, для выполнения 51%-ой атаки потребуется всего около 2 миллионов долларов США. В действительности, покупка монет, достаточной для 51%-ой атаки на сеть может привести к повышению цены на монету NAV и, следовательно, значительно удорожит атаку сети. Но все же стоит отметить важность обеспечения безопасности сети для привлечения большего количества людей осуществлять стекинг монет.

### Резюме

Изменение статического вознаграждения за блок в 2 NAV повышает безопасность сети несколькими способами. Во-первых, это заставляет людей постоянно находиться в сети для обеспечения постоянной защиты своего веса. Во-вторых, это увеличивает потенциальные доходы для стекеров, что привлечет больше людей запускать стекинг NavCoin и увеличит вес сети. Оба этих фактора усложняют 51%-ую атаку сети и повышают ее безопасность.

### Дополнительные предлагаемые изменения

When we originally proposed 0.25 NAV per block for the Community Fund we calculated that as 20% of the current inflation rate. So reducing from 5% to 4% and adding 0.25 NAV was roughly equal. However this calculation was based on 40% of coins staking at 5% reward. I would suggest that if we move to a static block reward, we increase the community fund amount to 0.5 NAV per block, so it retains the 20% ratio to staking rewards as was originally intended.

This would mean that there are 2,102,400 NAV created per year for staking and 525,600 NAV per year created for the community fund totalling 2,628,000 new NAV created per year. This equals an initial inflation rate of 4.17% which is exponentially decreasing as a percentage as explained previously.

### Alternative approaches

##### Maximum Coin Age

We could introduce a maximum coin age of 1 month. If they came online after 6 months to claim reward, they would only receive 1 months of reward. This would incentivise people to remain online because otherwise they would miss out on rewards. However, for a big staker, they can cycle thorugh all their coins quite quickly, but a small staker would potentially miss out on rewards even if they stayed online the whole time. I would argue this solution is worse for small stakers than a static reward. It also doesn't address the fact that other coins have higher rewards and attracts no new users.

##### Block Validator Reward

We could keep the coinage based staking rewards for the block minter and create an additional static reward which the minter issues to people who are online and securing the network with their weight even if they aren't the block minter. It would still essentially be a lottery based on network weight, but this way we have a hybrid system where everyone gets their percentage, but people who are online staking all the time get extra. This alternative would take a reasonable amount of investigation, research and testing to accomplish and it's not been trialled before afaik. For simplicities sake, i would argue that just using a static reward is a better option.

##### Other approaches

Not sure what else, i haven't thought of any other ways to solve this problem yet. If you have any ideas, don't be afraid to post them in the thread.

### Conclusion

I'm personally in favour of changing the block reward to 2 NAV and increasing the Community Fund to 0.5 NAV per block.

I would suggest bundling these changes with NPIP002 and NPIP003 into NavCoin Core v4.5.0 (4.3.0 is Open Alias, 4.4.0 is Community Fund Claims) so we can reduce the number of versions released. Each individual protocol change will have its own version bit, so people can vote on each individually if they only want some of the updates rather than all of them.

If you have any comments or suggestions, please either post to the reddit thread or directly on the NPIP GitHub.

https://www.reddit.com/r/NavCoin/comments/980eql/npip004_static_block_reward
